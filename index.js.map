{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst my_api = '45998239-83277c8f1384b713dfba7e075';\nconst searchInput = document.querySelector('.search-input');\nconst searchBtn = document.querySelector('.search-btn');\nconst images = document.querySelector('.images');\nconst loadingMessage = document.querySelector('.loading-message');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nconst perPage = 20;\nlet lightbox;\nlet totalImages = 0;\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: my_api,\n        q: searchInput.value,\n        image_type: 'photo',\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    const data = response.data;\n    totalImages += data.hits.length;\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loadMoreBtn.style.display = 'none';\n      return;\n    } else if (totalImages >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n    const markup = data.hits\n      .map(image => {\n        return `\n        <li class=\"image\">\n            <a class=\"image-link\" href=\"${image.largeImageURL}\"><img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n            <div class=\"image-info\">\n              <p class=\"image-desc\">\n               <span class=\"desc title\">Likes</span> \n               <span class=\"desc value\">${image.likes}</span> \n              </p>\n              <p class=\"image-desc\">\n               <span class=\"desc title\">Views</span> \n               <span class=\"desc value\">${image.views}</span> \n              </p>\n              <p class=\"image-desc\">\n               <span class=\"desc title\">Comments</span> \n               <span class=\"desc value\">${image.comments}</span>\n              </p>\n              <p class=\"image-desc\">\n               <span class=\"desc title\">Downloads</span> \n               <span class=\"desc value\">${image.downloads}</span>\n              </p>\n            </div>\n        </li>\n        `;\n      })\n      .join('');\n\n    images.insertAdjacentHTML('beforeend', markup);\n\n    if (lightbox) {\n      lightbox.destroy();\n    }\n\n    lightbox = new SimpleLightbox('.image a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      captionPosition: 'bottom',\n      backgroundColor: 'red',\n    });\n\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `An error occurred: ${error.message}`,\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n  } finally {\n    loadingMessage.style.display = 'none';\n  }\n}\n\nsearchBtn.addEventListener('click', async e => {\n  e.preventDefault();\n  searchInput.value = searchInput.value.trim();\n  images.innerHTML = '';\n  page = 1;\n  totalImages = 0;\n  loadingMessage.style.display = 'block';\n  await fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  loadingMessage.style.display = 'block';\n  await fetchImages();\n});\n"],"names":["my_api","searchInput","searchBtn","images","loadingMessage","loadMoreBtn","page","perPage","lightbox","totalImages","fetchImages","data","axios","iziToast","markup","image","SimpleLightbox","error","e"],"mappings":"owBAMA,MAAMA,EAAS,qCACTC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EACAC,EAAc,EAElB,eAAeC,GAAc,CAC3B,GAAI,CAWF,MAAMC,GAVW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKZ,EACL,EAAGC,EAAY,MACf,WAAY,QACZ,SAAUM,EACV,KAAMD,CACP,CACP,CAAK,GAEqB,KAEtB,GADAG,GAAeE,EAAK,KAAK,OACrBA,EAAK,KAAK,SAAW,GAAKL,IAAS,EAAG,CACxCO,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACDR,EAAY,MAAM,QAAU,OAC5B,MACN,MAAeI,GAAeE,EAAK,WAC7BN,EAAY,MAAM,QAAU,OAC5BQ,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAEDR,EAAY,MAAM,QAAU,QAE9B,MAAMS,EAASH,EAAK,KACjB,IAAII,GACI;AAAA;AAAA,0CAE2BA,EAAM,aAAa,2BAA2BA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,0CAIpFA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,0CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAKlD,EACA,KAAK,EAAE,EAEVZ,EAAO,mBAAmB,YAAaW,CAAM,EAEzCN,GACFA,EAAS,QAAO,EAGlBA,EAAW,IAAIQ,EAAe,WAAY,CACxC,aAAc,MACd,aAAc,IACd,gBAAiB,SACjB,gBAAiB,KACvB,CAAK,EAEDR,EAAS,QAAO,CACjB,OAAQS,EAAO,CACdJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBAAsBI,EAAM,OAAO,GAC5C,SAAU,WACV,gBAAiB,KACvB,CAAK,CACL,QAAY,CACRb,EAAe,MAAM,QAAU,MAChC,CACH,CAEAF,EAAU,iBAAiB,QAAS,MAAMgB,GAAK,CAC7CA,EAAE,eAAc,EAChBjB,EAAY,MAAQA,EAAY,MAAM,KAAI,EAC1CE,EAAO,UAAY,GACnBG,EAAO,EACPG,EAAc,EACdL,EAAe,MAAM,QAAU,QAC/B,MAAMM,EAAW,CACnB,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CAChDC,IACAF,EAAe,MAAM,QAAU,QAC/B,MAAMM,EAAW,CACnB,CAAC"}